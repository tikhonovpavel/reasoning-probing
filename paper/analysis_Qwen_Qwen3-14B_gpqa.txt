
--- Accuracy vs. Reasoning Chain Length (Raw) ---
 num_chunks  accuracy  count
          1  0.676471     34
          2  0.521739     23
          3  0.526316     19
          4  0.750000     16
          5  0.769231     13
          6  0.714286     21
          7  0.714286     14
          8  0.571429      7
          9  0.666667      9
         10  0.555556      9
         11  0.454545     11
         12  0.583333     12
         13  0.500000     16
         14  0.428571      7
         15  0.333333      6
         16  0.800000      5
         17  0.625000      8
         18  0.625000      8
         19  0.416667     12
         20  0.500000      2
         21  0.600000      5
         22  0.875000      8
         23  0.000000      3
         24  0.166667      6
         25  0.555556      9
         26  0.250000      4
         27  1.000000      2
         28  0.333333      3
         29  0.666667      3
         30  0.666667      3
         31  0.333333      6
         32  0.333333      3
         33  1.000000      3
         34  0.500000      4
         35  1.000000      1
         36  0.500000      2
         37  0.166667      6
         38  0.000000      3
         39  1.000000      1
         40  1.000000      2
         41  0.500000      4
         42  0.333333      3
         46  0.500000      2
         47  0.333333      3
         48  1.000000      1
         50  1.000000      1
         51  0.000000      1
         52  0.000000      2
         53  1.000000      1
         54  1.000000      1
         55  0.000000      1
         56  0.000000      1
         57  0.000000      1
         58  0.000000      1
         60  1.000000      1
         62  0.000000      1
         64  0.000000      1
         69  0.000000      1
         70  0.000000      1
         71  0.000000      1
         75  1.000000      1
         83  0.000000      1
         89  0.500000      2
----------------------------------------

--- Accuracy vs. Reasoning Chain Length (Binned at >8.0%) ---

--- Bin: 1-1 (Total: 34 examples, 9.4%) ---
                      accuracy  count  percentage_of_bin  percentage_of_total
num_changes_category                                                         
0                         0.68     34             100.00                 9.39
1                         0.00      0               0.00                 0.00
2                         0.00      0               0.00                 0.00
3+                        0.00      0               0.00                 0.00

--- Bin: 2-3 (Total: 42 examples, 11.6%) ---
                      accuracy  count  percentage_of_bin  percentage_of_total
num_changes_category                                                         
0                         0.49     37              88.10                10.22
1                         0.80      5              11.90                 1.38
2                         0.00      0               0.00                 0.00
3+                        0.00      0               0.00                 0.00

--- Bin: 4-5 (Total: 29 examples, 8.0%) ---
                      accuracy  count  percentage_of_bin  percentage_of_total
num_changes_category                                                         
0                         0.79     14              48.28                 3.87
1                         0.71     14              48.28                 3.87
2                         1.00      1               3.45                 0.28
3+                        0.00      0               0.00                 0.00

--- Bin: 6-7 (Total: 35 examples, 9.7%) ---
                      accuracy  count  percentage_of_bin  percentage_of_total
num_changes_category                                                         
0                         0.54     13              37.14                 3.59
1                         0.88     16              45.71                 4.42
2                         0.75      4              11.43                 1.10
3+                        0.50      2               5.71                 0.55

--- Bin: 8-11 (Total: 36 examples, 9.9%) ---
                      accuracy  count  percentage_of_bin  percentage_of_total
num_changes_category                                                         
0                         0.50     18              50.00                 4.97
1                         0.54     13              36.11                 3.59
2                         0.75      4              11.11                 1.10
3+                        1.00      1               2.78                 0.28

--- Bin: 12-13 (Total: 28 examples, 7.7%) ---
                      accuracy  count  percentage_of_bin  percentage_of_total
num_changes_category                                                         
0                         0.55     11              39.29                 3.04
1                         0.55     11              39.29                 3.04
2                         0.33      3              10.71                 0.83
3+                        0.67      3              10.71                 0.83

--- Bin: 14-18 (Total: 34 examples, 9.4%) ---
                      accuracy  count  percentage_of_bin  percentage_of_total
num_changes_category                                                         
0                         0.58     12              35.29                 3.31
1                         0.64     14              41.18                 3.87
2                         0.67      3               8.82                 0.83
3+                        0.20      5              14.71                 1.38

--- Bin: 19-23 (Total: 30 examples, 8.3%) ---
                      accuracy  count  percentage_of_bin  percentage_of_total
num_changes_category                                                         
0                         0.60     10              33.33                 2.76
1                         0.36     11              36.67                 3.04
2                         0.60      5              16.67                 1.38
3+                        0.75      4              13.33                 1.10

--- Bin: 24-30 (Total: 30 examples, 8.3%) ---
                      accuracy  count  percentage_of_bin  percentage_of_total
num_changes_category                                                         
0                         0.33     12              40.00                 3.31
1                         0.80      5              16.67                 1.38
2                         0.50      6              20.00                 1.66
3+                        0.43      7              23.33                 1.93

--- Bin: 31-38 (Total: 28 examples, 7.7%) ---
                      accuracy  count  percentage_of_bin  percentage_of_total
num_changes_category                                                         
0                         0.44      9              32.14                 2.49
1                         0.20      5              17.86                 1.38
2                         0.33      3              10.71                 0.83
3+                        0.45     11              39.29                 3.04

--- Bin: 39-62 (Total: 28 examples, 7.7%) ---
                      accuracy  count  percentage_of_bin  percentage_of_total
num_changes_category                                                         
0                         0.50      8              28.57                 2.21
1                         1.00      2               7.14                 0.55
2                         0.00      3              10.71                 0.83
3+                        0.47     15              53.57                 4.14

--- Bin: 64-89 (Total: 8 examples, 2.2%) ---
                      accuracy  count  percentage_of_bin  percentage_of_total
num_changes_category                                                         
0                         0.00      1              12.50                 0.28
1                         0.00      2              25.00                 0.55
2                         0.50      2              25.00                 0.55
3+                        0.33      3              37.50                 0.83
/disk/4tb/tikhonov/projects/reasoning-probing/analyze_accuracy_vs_length.py:157: FutureWarning: The default of observed=False is deprecated and will be changed to True in a future version of pandas. Pass observed=False to retain current behavior or observed=True to adopt the future default and silence this warning.
  plot_df['total_in_bin'] = plot_df.groupby('num_chunks_range')['count'].transform('sum')
/disk/4tb/tikhonov/projects/reasoning-probing/analyze_accuracy_vs_length.py:205: FutureWarning: Series.__getitem__ treating keys as positions is deprecated. In a future version, integer keys will always be treated as labels (consistent with DataFrame behavior). To access a value by position, use `ser.iloc[pos]`
  y_pos = bottoms[j] + height / 2
2025-09-20 23:48:25,867 - INFO - Binned plot saved to analysis_results/accuracy_vs_length/binned_accuracy_vs_length_by_changes_reasoning_traces_gpqa_Qwen_Qwen3-14B.png
------------------------------------------------------------
========================================
2025-09-20 23:48:27,677 - INFO - Scatter plot saved to analysis_results/critical_chunk_prob_change/prob_change_scatter_reasoning_traces_gpqa_Qwen_Qwen3-14B.png
2025-09-20 23:48:27,986 - INFO - Histogram saved to analysis_results/critical_chunk_prob_change/prob_change_hist_reasoning_traces_gpqa_Qwen_Qwen3-14B.png
2025-09-20 23:48:28,132 - INFO - Absolute index histogram saved to analysis_results/critical_chunk_prob_change/critical_index_abs_hist_reasoning_traces_gpqa_Qwen_Qwen3-14B.png
2025-09-20 23:48:28,330 - INFO - Relative index histogram saved to analysis_results/critical_chunk_prob_change/critical_index_rel_hist_reasoning_traces_gpqa_Qwen_Qwen3-14B.png
2025-09-20 23:48:28,829 - INFO - Probability change vs. index plot saved to analysis_results/critical_chunk_prob_change/prob_change_vs_index_reasoning_traces_gpqa_Qwen_Qwen3-14B.png
2025-09-20 23:48:29,131 - INFO - Chunks remaining histogram saved to analysis_results/critical_chunk_prob_change/chunks_remaining_hist_reasoning_traces_gpqa_Qwen_Qwen3-14B.png

--- Analysis of Probability Change for CORRECT Answer (num_changes = 1) ---
                               count      mean       std       min       25%       50%       75%       max
switch_type                                                                                               
Switch FROM Correct             11.0 -0.520895  0.310454 -0.937643 -0.815162 -0.464106 -0.309871 -0.089968
Switch Incorrect to Incorrect   26.0 -0.039255  0.062217 -0.222284 -0.069196 -0.002204 -0.000379  0.020033
Switch TO Correct               61.0  0.826367  0.207042  0.019787  0.734743  0.881489  0.983472  0.999993
----------------------------------------------------------------------

--- Distribution of Critical Chunk Index (Absolute) ---
count    98.000000
mean      7.653061
std      11.599060
min       1.000000
25%       2.000000
50%       4.000000
75%       8.750000
max      81.000000

--- Distribution of Critical Chunk Index (Relative) ---
count    98.000000
mean      0.462796
std       0.262621
min       0.033333
25%       0.250000
50%       0.422619
75%       0.700000
max       0.985714
----------------------------------------------------------------------

--- Distribution of Chunks Remaining After Critical Switch ---
                               count      mean       std  min   25%  50%   75%   max
switch_type                                                                         
Switch FROM Correct             11.0  4.818182  4.578606  0.0  2.50  3.0  6.00  16.0
Switch Incorrect to Incorrect   26.0  6.615385  7.037482  0.0  1.25  5.0  8.75  27.0
Switch TO Correct               61.0  6.229508  7.636302  0.0  2.00  4.0  8.00  39.0
----------------------------------------------------------------------
========================================
2025-09-20 23:48:33,909 - INFO - Loading tokenizer for model: Qwen/Qwen3-14B
2025-09-20 23:48:35,802 - INFO - Threshold=0.10 | Coverage=62.43% (226/362) | Precision=53.98% (122/226) | Overall Acc=54.97% | Avg Chunk Savings=16.02 (Overall: 10.00) | Avg Token Savings=39.63 (Overall: 24.74)
2025-09-20 23:48:35,827 - INFO - Threshold=0.20 | Coverage=57.73% (209/362) | Precision=67.94% (142/209) | Overall Acc=62.71% | Avg Chunk Savings=12.56 (Overall: 7.25) | Avg Token Savings=26.87 (Overall: 15.51)
2025-09-20 23:48:35,848 - INFO - Threshold=0.30 | Coverage=51.93% (188/362) | Precision=78.72% (148/188) | Overall Acc=66.30% | Avg Chunk Savings=9.99 (Overall: 5.19) | Avg Token Savings=17.49 (Overall: 9.08)
2025-09-20 23:48:35,865 - INFO - Threshold=0.40 | Coverage=45.58% (165/362) | Precision=83.64% (138/165) | Overall Acc=66.02% | Avg Chunk Savings=8.39 (Overall: 3.82) | Avg Token Savings=13.65 (Overall: 6.22)
2025-09-20 23:48:35,882 - INFO - Threshold=0.50 | Coverage=40.61% (147/362) | Precision=85.71% (126/147) | Overall Acc=64.64% | Avg Chunk Savings=7.32 (Overall: 2.97) | Avg Token Savings=11.33 (Overall: 4.60)
2025-09-20 23:48:35,898 - INFO - Threshold=0.60 | Coverage=35.08% (127/362) | Precision=88.19% (112/127) | Overall Acc=62.98% | Avg Chunk Savings=7.06 (Overall: 2.48) | Avg Token Savings=10.95 (Overall: 3.84)
2025-09-20 23:48:35,912 - INFO - Threshold=0.70 | Coverage=28.73% (104/362) | Precision=88.46% (92/104) | Overall Acc=60.22% | Avg Chunk Savings=7.01 (Overall: 2.01) | Avg Token Savings=11.48 (Overall: 3.30)
2025-09-20 23:48:35,924 - INFO - Threshold=0.80 | Coverage=21.55% (78/362) | Precision=91.03% (71/78) | Overall Acc=59.39% | Avg Chunk Savings=6.26 (Overall: 1.35) | Avg Token Savings=8.72 (Overall: 1.88)
2025-09-20 23:48:35,935 - INFO - Threshold=0.90 | Coverage=13.81% (50/362) | Precision=92.00% (46/50) | Overall Acc=57.18% | Avg Chunk Savings=5.50 (Overall: 0.76) | Avg Token Savings=8.56 (Overall: 1.18)
2025-09-20 23:48:35,936 - INFO - --- Best Heuristic Performance ---
2025-09-20 23:48:35,936 - INFO - Max Overall Accuracy: 66.30% achieved at Threshold=0.30
2025-09-20 23:48:35,936 - INFO -   - Coverage: 51.93% (188/362)
2025-09-20 23:48:35,936 - INFO -   - Precision: 78.72% (148/188)
2025-09-20 23:48:35,936 - INFO -   - Avg Chunk Savings (per trigger): 9.99
2025-09-20 23:48:35,937 - INFO -   - Overall Avg Chunk Savings: 5.19
2025-09-20 23:48:35,937 - INFO -   - Avg Token Savings (per trigger): 17.49
2025-09-20 23:48:35,937 - INFO -   - Overall Avg Token Savings: 9.08
2025-09-20 23:48:35,937 - INFO - ------------------------------------
2025-09-20 23:48:36,710 - INFO - Trade-off plot saved to analysis_results/jump_heuristic/jump_heuristic_tradeoff_reasoning_traces_gpqa_Qwen_Qwen3-14B.png
